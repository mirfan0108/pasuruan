<template>
    <div>
        <div class="card">
            <div class="card-body">
                <h4 class="card-title">Form Info Faktor Evaluasi Jabatan Struktural</h4>
                <h4 class="card-subtitle">Informasi Jabatan</h4>
                <table class="table" >
                    <tr>
                        <td>Nama Jabatan</td>
                        <td><strong>{{infoJabatan.name}}</strong></td>
                    </tr>
                    <tr>
                        <td>Organisasi</td>
                        <td><strong v-if="infoJabatan.TB_OPD">{{infoJabatan.TB_OPD.name}}</strong></td>
                    </tr>
                </table>
            

                <div class="row">
                    <div class="col-md-4 col-lg-4">
                        <div class="card">
                            <div class="card-body">
                                <div class="list-group"> 
                                    <a @click.prevent="doStep('F1')" href="javascript:void(0)" 
                                        :class="step == 'faktor-satu' ? 'list-group-item active' : 'list-group-item'">F1 RUANG LINGKUP</a> 
                                    <a href="javascript:void(0)" @click.prevent="doStep('F2')" 
                                        :class="step == 'faktor-dua' ? 'list-group-item active' : 'list-group-item'">F2 PENGATURAN ORGANISASI</a>
                                    <a href="javascript:void(0)" @click.prevent="doStep('F3')" 
                                        :class="step == 'faktor-tiga' ? 'list-group-item active' : 'list-group-item'">F3 WEWENANG PENYELIAAN</a>
                                    <a href="javascript:void(0)" @click.prevent="doStep('F41')" 
                                        :class="step == 'faktor-empat1' ? 'list-group-item active' : 'list-group-item'">F4 HUBUNGAN PERSONAL (Sifat Hubungan)</a>
                                    <a href="javascript:void(0)" @click.prevent="doStep('F42')" 
                                        :class="step == 'faktor-empat2' ? 'list-group-item active' : 'list-group-item'">F4 HUBUNGAN PERSONAL (Tujuan Hubungan)</a>
                                    <a href="javascript:void(0)" @click.prevent="doStep('F5')" 
                                        :class="step == 'faktor-lima' ? 'list-group-item active' : 'list-group-item'" >F5 KESULITAN PENGARAHAN PEKERJAAN </a>
                                    <a href="javascript:void(0)" @click.prevent="doStep('F6')" 
                                        :class="step == 'faktor-enam' ? 'list-group-item active' : 'list-group-item'">F6 KONDISI LAIN </a>
                                    <a href="javascript:void(0)" @click.prevent="doStep('REQ')" 
                                        :class="step == 'syarat' ? 'list-group-item active' : 'list-group-item'">PERSYARATAN JABATAN </a>

                                </div>
                            </div>
                        </div>
                        
                    </div>
                
                
                <div class="col-md-8 col-lg-8">
                    <!-- FAKTOR 1 -->
                    <div v-if = "step == 'faktor-satu'">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="card">
                                    <div class="card-body">
                                        <h6 class="card-title">F1 Ruang Lingkup + Dampak L5</h6>
                                        
                                        <div class="form-group">
                                            <label>Standar Jabatan (optional)</label>
                                            <textarea  class="form-control" placeholder="Ketik disini ..."  rows="3" v-model="formInfoFak.standar"></textarea>
                                        </div>

                                        <div class="form-group">
                                            <label>RUANG LINGKUP DAN DAMPAK PROGRAM </label>
                                            <div class="form-group">
                                                <tr>
                                                    <td style="width: 30%;">
                                                        <select  v-model="numb_f1" id="fSatu" class="form-control select2 " style="width: 100%;" data-select2-id="1" tabindex="-1" aria-hidden="true">
                                                            <option value="0" selected disabled> --- PILIH F1 ---</option>
                                                            <option value="1">1</option>
                                                            <option value="2">2</option>
                                                            <option value="3">3</option>
                                                            <option value="4">4</option>
                                                            <option value="5">5</option>                            
                                                        </select>
                                                    </td>
                                                    <td style="width: 20%; text-align: center;">
                                                        {{counterF1(numb_f1)}}
                                                    </td>
                                                </tr>
                                            </div>
                                            <div class="input-group">
                                                <textarea  class="form-control" placeholder="Ketik disini ..."  rows="3" v-model="formInfoFak.info"></textarea>
                                            </div><br>
                                            <button type="button" class="btn btn-success btn-sm btn-rounded pull-right" @click.prevent="saveInput()">
                                                <i class="fa fa-plus-square"></i> Tambahkan
                                            </button>
                                        </div><br>
                                        <hr>
                                        <div style="margin-top: 5px;" v-if="listInfoFak.length > 0">
                                            <div v-for="fk in listInfoFak">
                                                <ul class="list-unstyled" v-if="fk.type == 'F1'">
                                                    <li class="media">
                                                        <div class="media-body">
                                                            <div class="d-flex w-100 justify-content-end">
                                                                <!-- <h5 class="mb-1 text-white">List group item heading</h5> -->
                                                                <!--  <small class="text-danger pull-right"><a href="javascript:void(0)" class="text-danger pull-right"><i class="fa fa-minus"></i> Hapus</a></small> -->
                                                            </div>
                                                            <p class="mb-1">
                                                                {{fk.info}}
                                                            </p>
                                                            <div v-if="fk.child && fk.child.length > 0">
                                                                <div class="media mt-3" v-for="(fkc, number) in fk.child">
                                                                    <div class="media-body pr-3">
                                                                        {{number+1}}. {{fkc.info}}
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="media mt-3" >
                                                                <div class="media-body pr-3">
                                                                    <div class="form-group">
                                                                        <textarea  class="form-control" placeholder="Ketik disini ..."  rows="3" v-model="formChild.info"></textarea>
                                                                    </div>
                                                                    <button type="button" class="btn btn-success btn-sm btn-rounded pull-right" @click.prevent="saveInputChild(fk.id)">
                                                                        <i class="fa fa-plus-square"></i> Tambahkan
                                                                    </button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>

                                        
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- FAKTOR 2 -->
                    <div v-if = "step == 'faktor-dua'">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="card">
                                    <div class="card-body">
                                        <h6 class="card-title">F2 PENGATURAN ORGANISASI</h6>
                                        <div class="form-group">
                                            <label>Standar Jabatan (optional)</label>
                                            <textarea  class="form-control" placeholder="Ketik disini ..."  rows="3" v-model="formInfoFak.standar"></textarea>
                                        </div>
                                        
                                        <div class="form-group">
                                            <label>PENGATURAN ORGANISASI </label>
                                            <div class="form-group">
                                                <tr>
                                                    
                                                    <td style="width: 30%;">
                                                        <select  v-model="numb_f2" id="fDua" class="form-control select2 " style="width: 100%;" data-select2-id="1" tabindex="-1" aria-hidden="true">
                                                            <option value="0" selected disabled> --- PILIH F2 ---</option>
                                                            <option value="1">1</option>
                                                            <option value="2">2</option>
                                                            <option value="3">3</option>                        
                                                        </select>
                                                    </td>
                                                    <td style="width: 20%; text-align: center;">
                                                        {{counterF2(numb_f2)}}
                                                    </td>
                                                </tr>
                                            </div>
                                            <div class="input-group">
                                                <textarea  class="form-control" placeholder="Ketik disini ..."  rows="3" v-model="formInfoFak.info"></textarea>
                                            </div><br>
                                            <button type="button" class="btn btn-success btn-sm btn-rounded pull-right" @click.prevent="saveInput()">
                                                <i class="fa fa-plus-square"></i> Tambahkan
                                            </button>
                                        </div><br>
                                        <hr>
                                        <div style="margin-top: 5px;" v-if="listInfoFak.length > 0">
                                            <div v-for="fk in listInfoFak">
                                                <ul class="list-unstyled" v-if="fk.type == 'F2'">
                                                    <li class="media">
                                                        <div class="media-body">
                                                            <div class="d-flex w-100 justify-content-end">
                                                                <!-- <h5 class="mb-1 text-white">List group item heading</h5> -->
                                                                <!--  <small class="text-danger pull-right"><a href="javascript:void(0)" class="text-danger pull-right"><i class="fa fa-minus"></i> Hapus</a></small> -->
                                                            </div>
                                                            <p class="mb-1">
                                                                {{fk.info}}
                                                            </p>
                                                            <div v-if="fk.child && fk.child.length > 0">
                                                                <div class="media mt-3" v-for="(fkc, number) in fk.child">
                                                                    <div class="media-body pr-3">
                                                                        {{number+1}}. {{fkc.info}}
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="media mt-3" >
                                                                <div class="media-body pr-3">
                                                                    <div class="form-group">
                                                                        <textarea  class="form-control" placeholder="Ketik disini ..."  rows="3" v-model="formChild.info"></textarea>
                                                                    </div>
                                                                    <button type="button" class="btn btn-success btn-sm btn-rounded pull-right" @click.prevent="saveInputChild(fk.id)">
                                                                        <i class="fa fa-plus-square"></i> Tambahkan
                                                                    </button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- FAKTOR 3 -->
                    <div v-if = "step == 'faktor-tiga'">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="card">
                                    <div class="card-body">
                                        <h6 class="card-title">F3 WEWENANG PENYELIAAN + MANAJERIAL L3</h6>
                                        <div class="form-group">
                                            <label>Standar Jabatan (optional)</label>
                                            <textarea  class="form-control" placeholder="Ketik disini ..."  rows="3" v-model="formInfoFak.standar"></textarea>
                                        </div>

                                        <div class="form-group">
                                            <label>WEWENANG PENYELIAAN DAN MANAJERIAL  </label>
                                            <div class="form-group">
                                                <tr>
                                                    
                                                    <td style="width: 30%;">
                                                        <select  v-model="numb_f3" id="fTiga" class="form-control select2 " style="width: 100%;" data-select2-id="1" tabindex="-1" aria-hidden="true">
                                                            <option value="0" selected disabled> --- PILIH F3 ---</option>
                                                            <option value="1">1</option>
                                                            <option value="2">2</option>
                                                            <option value="3">3</option>                           
                                                        </select>
                                                    </td>
                                                    <td style="width: 20%; text-align: center;">
                                                        {{counterF3(numb_f3)}}
                                                    </td>
                                                </tr>
                                            </div>
                                            <div class="input-group">
                                                <textarea  class="form-control" placeholder="Ketik disini ..."  rows="3" v-model="formInfoFak.info"></textarea>
                                            </div><br>
                                            <button type="button" class="btn btn-success btn-sm btn-rounded pull-right" @click.prevent="saveInput()">
                                                <i class="fa fa-plus-square"></i> Tambahkan
                                            </button>
                                        </div><br>
                                        <hr>
                                        <div style="margin-top: 5px;" v-if="listInfoFak.length > 0">
                                            <div v-for="fk in listInfoFak">
                                                <ul class="list-unstyled" v-if="fk.type == 'F3'">
                                                    <li class="media">
                                                        <div class="media-body">
                                                            <div class="d-flex w-100 justify-content-end">
                                                                <!-- <h5 class="mb-1 text-white">List group item heading</h5> -->
                                                                <!--  <small class="text-danger pull-right"><a href="javascript:void(0)" class="text-danger pull-right"><i class="fa fa-minus"></i> Hapus</a></small> -->
                                                            </div>
                                                            <p class="mb-1">
                                                                {{fk.info}}
                                                            </p>
                                                            <div v-if="fk.child && fk.child.length > 0">
                                                                <div class="media mt-3" v-for="(fkc, number) in fk.child">
                                                                    <div class="media-body pr-3">
                                                                        {{number+1}}. {{fkc.info}}
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="media mt-3" >
                                                                <div class="media-body pr-3">
                                                                    <div class="form-group">
                                                                        <textarea  class="form-control" placeholder="Ketik disini ..."  rows="3" v-model="formChild.info"></textarea>
                                                                    </div>
                                                                    <button type="button" class="btn btn-success btn-sm btn-rounded pull-right" @click.prevent="saveInputChild(fk.id)">
                                                                        <i class="fa fa-plus-square"></i> Tambahkan
                                                                    </button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- FAKTOR 4 1 -->
                    <div v-if = "step == 'faktor-empat1'">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="card">
                                    <div class="card-body">
                                        <h6 class="card-title">F4.A HUBUNGAN PERSONAL (Sifat Hubungan)</h6>
                                        <div class="form-group">
                                            <label>Standar Jabatan (optional)</label>
                                            <textarea  class="form-control" placeholder="Ketik disini ..."  rows="3" v-model="formInfoFak.standar"></textarea>
                                        </div>

                                        <div class="form-group">
                                            <label>HUBUNGAN PERSONAL (SIFAT HUBUNGAN)  </label>
                                            <div class="form-group">
                                                <tr>
                                                    
                                                    <td style="width: 30%;">
                                                        <select  v-model="numb_f41" id="fEmpatSatu" class="form-control select2 " style="width: 100%;" data-select2-id="1" tabindex="-1" aria-hidden="true">
                                                            <option value="0" selected disabled> --- PILIH F4.1 ---</option>
                                                            <option value="1">1</option>
                                                            <option value="2">2</option>
                                                            <option value="3">3</option>
                                                            <option value="4">4</option>                         
                                                        </select>
                                                    </td>
                                                    <td style="width: 20%; text-align: center;">
                                                        {{counterF41(numb_f41)}}
                                                    </td>
                                                </tr>
                                            </div>
                                            <div class="input-group">
                                                <textarea  class="form-control" placeholder="Ketik disini ..."  rows="3" v-model="formInfoFak.info"></textarea>
                                            </div><br>
                                            <button type="button" class="btn btn-success btn-sm btn-rounded pull-right" @click.prevent="saveInput()">
                                                <i class="fa fa-plus-square"></i> Tambahkan
                                            </button>
                                        </div><br>
                                        <hr>
                                        <div style="margin-top: 5px;" v-if="listInfoFak.length > 0">
                                            <div v-for="fk in listInfoFak">
                                                <ul class="list-unstyled" v-if="fk.type == 'F41'">
                                                    <li class="media">
                                                        <div class="media-body">
                                                            <div class="d-flex w-100 justify-content-end">
                                                                <!-- <h5 class="mb-1 text-white">List group item heading</h5> -->
                                                                <!--  <small class="text-danger pull-right"><a href="javascript:void(0)" class="text-danger pull-right"><i class="fa fa-minus"></i> Hapus</a></small> -->
                                                            </div>
                                                            <p class="mb-1">
                                                                {{fk.info}}
                                                            </p>
                                                            <div v-if="fk.child && fk.child.length > 0">
                                                                <div class="media mt-3" v-for="(fkc, number) in fk.child">
                                                                    <div class="media-body pr-3">
                                                                        {{number+1}}. {{fkc.info}}
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="media mt-3" >
                                                                <div class="media-body pr-3">
                                                                    <div class="form-group">
                                                                        <textarea  class="form-control" placeholder="Ketik disini ..."  rows="3" v-model="formChild.info"></textarea>
                                                                    </div>
                                                                    <button type="button" class="btn btn-success btn-sm btn-rounded pull-right" @click.prevent="saveInputChild(fk.id)">
                                                                        <i class="fa fa-plus-square"></i> Tambahkan
                                                                    </button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- FAKTOR 4 2 -->
                    <div v-if = "step == 'faktor-empat2'">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="card">
                                    <div class="card-body">
                                        <h6 class="card-title">F4 HUBUNGAN PERSONAL (Tujuan Hubungan)</h6>
                                        <div class="form-group">
                                            <label>Standar Jabatan (optional)</label>
                                            <textarea  class="form-control" placeholder="Ketik disini ..."  rows="3" v-model="formInfoFak.standar"></textarea>
                                        </div>

                                        <div class="form-group">
                                            <label>HUBUNGAN PERSONAL (TUJUAN HUBUNGAN)  </label>
                                            <div class="form-group">
                                                <tr>
                                                    
                                                    <td style="width: 30%;">
                                                        <select  v-model="numb_f42" id="fEmpatDua" class="form-control select2 " style="width: 100%;" data-select2-id="1" tabindex="-1" aria-hidden="true">
                                                            <option value="0" selected disabled> --- PILIH F4.2 ---</option>
                                                            <option value="1">1</option>
                                                            <option value="2">2</option>
                                                            <option value="3">3</option>
                                                            <option value="4">4</option>                           
                                                        </select>
                                                    </td>
                                                    <td style="width: 20%; text-align: center;">
                                                        {{counterF42(numb_f42)}}
                                                    </td>
                                                </tr>
                                            </div>
                                            <div class="input-group">
                                                <textarea  class="form-control" placeholder="Ketik disini ..."  rows="3" v-model="formInfoFak.info"></textarea>
                                            </div><br>
                                            <button type="button" class="btn btn-success btn-sm btn-rounded pull-right" @click.prevent="saveInput()">
                                                <i class="fa fa-plus-square"></i> Tambahkan
                                            </button>
                                        </div><br>
                                        <hr>
                                        <div style="margin-top: 5px;" v-if="listInfoFak.length > 0">
                                            <div v-for="fk in listInfoFak">
                                                <ul class="list-unstyled" v-if="fk.type == 'F42'">
                                                    <li class="media">
                                                        <div class="media-body">
                                                            <div class="d-flex w-100 justify-content-end">
                                                                <!-- <h5 class="mb-1 text-white">List group item heading</h5> -->
                                                                <!--  <small class="text-danger pull-right"><a href="javascript:void(0)" class="text-danger pull-right"><i class="fa fa-minus"></i> Hapus</a></small> -->
                                                            </div>
                                                            <p class="mb-1">
                                                                {{fk.info}}
                                                            </p>
                                                            <div v-if="fk.child && fk.child.length > 0">
                                                                <div class="media mt-3" v-for="(fkc, number) in fk.child">
                                                                    <div class="media-body pr-3">
                                                                        {{number+1}}. {{fkc.info}}
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="media mt-3" >
                                                                <div class="media-body pr-3">
                                                                    <div class="form-group">
                                                                        <textarea  class="form-control" placeholder="Ketik disini ..."  rows="3" v-model="formChild.info"></textarea>
                                                                    </div>
                                                                    <button type="button" class="btn btn-success btn-sm btn-rounded pull-right" @click.prevent="saveInputChild(fk.id)">
                                                                        <i class="fa fa-plus-square"></i> Tambahkan
                                                                    </button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- FAKTOR 5 -->
                    <div v-if = "step == 'faktor-lima'">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="card">
                                    <div class="card-body">
                                        <h6 class="card-title">F5 KESULITAN PENGARAHAN PEKERJAAN</h6>
                                        <div class="form-group">
                                            <label>Standar Jabatan (optional)</label>
                                            <textarea  class="form-control" placeholder="Ketik disini ..."  rows="3" v-model="formInfoFak.standar"></textarea>
                                        </div>

                                        <div class="form-group">
                                            <label>KESULITAN DALAM PENGARAHAN PEKERJAAN   </label>

                                            <div class="form-group">
                                                <tr>
                                                    
                                                    <td style="width: 30%;">
                                                        <select  v-model="numb_f5" id="fLima" class="form-control select2 " style="width: 100%;" data-select2-id="1" tabindex="-1" aria-hidden="true">
                                                            <option value="0" selected disabled> --- PILIH F5 ---</option>
                                                            <option value="1">1</option>
                                                            <option value="2">2</option>
                                                            <option value="3">3</option>
                                                            <option value="4">4</option>
                                                            <option value="5">5</option> 
                                                            <option value="6">6</option>
                                                            <option value="7">7</option>
                                                            <option value="8">8</option>                            
                                                        </select>
                                                    </td>
                                                    <td style="width: 20%; text-align: center;">
                                                        {{counterF5(numb_f5)}}
                                                    </td>
                                                </tr>
                                            </div>
                                            <div class="input-group">
                                                <textarea  class="form-control" placeholder="Ketik disini ..."  rows="3" v-model="formInfoFak.info"></textarea>
                                            </div><br>
                                            <button type="button" class="btn btn-success btn-sm btn-rounded pull-right" @click.prevent="saveInput()">
                                                <i class="fa fa-plus-square"></i> Tambahkan
                                            </button>
                                        </div><br>
                                        <hr>
                                        <div style="margin-top: 5px;" v-if="listInfoFak.length > 0">
                                            <div v-for="fk in listInfoFak">
                                                <ul class="list-unstyled" v-if="fk.type == 'F5'">
                                                    <li class="media">
                                                        <div class="media-body">
                                                            <div class="d-flex w-100 justify-content-end">
                                                                <!-- <h5 class="mb-1 text-white">List group item heading</h5> -->
                                                                <!--  <small class="text-danger pull-right"><a href="javascript:void(0)" class="text-danger pull-right"><i class="fa fa-minus"></i> Hapus</a></small> -->
                                                            </div>
                                                            <p class="mb-1">
                                                                {{fk.info}}
                                                            </p>
                                                            <div v-if="fk.child && fk.child.length > 0">
                                                                <div class="media mt-3" v-for="(fkc, number) in fk.child">
                                                                    <div class="media-body pr-3">
                                                                        {{number+1}}. {{fkc.info}}
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="media mt-3" >
                                                                <div class="media-body pr-3">
                                                                    <div class="form-group">
                                                                        <textarea  class="form-control" placeholder="Ketik disini ..."  rows="3" v-model="formChild.info"></textarea>
                                                                    </div>
                                                                    <button type="button" class="btn btn-success btn-sm btn-rounded pull-right" @click.prevent="saveInputChild(fk.id)">
                                                                        <i class="fa fa-plus-square"></i> Tambahkan
                                                                    </button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- FAKTOR 6 -->
                    <div v-if = "step == 'faktor-enam'">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="card">
                                    <div class="card-body">
                                        <h6 class="card-title">F6 KONDISI LAIN</h6>
                                        <div class="form-group">
                                            <label>Standar Jabatan (optional)</label>
                                            <textarea  class="form-control" placeholder="Ketik disini ..."  rows="3" v-model="formInfoFak.standar"></textarea>
                                        </div>

                                        <div class="form-group">
                                            <label>KONDISI LAIN</label>
                                            <div class="form-group">
                                                <tr>
                                                    <td style="width: 30%;">
                                                        <select  v-model="numb_f6" id="fEnam" class="form-control select2 " style="width: 100%;" data-select2-id="1" tabindex="-1" aria-hidden="true">
                                                            <option value="0" selected disabled> --- PILIH F6 ---</option>
                                                            <option value="1">1</option>
                                                            <option value="2">2</option>
                                                            <option value="3">3</option>
                                                            <option value="4">4</option>
                                                            <option value="5">5</option>
                                                            <option value="6">6</option>                            
                                                        </select>
                                                    </td>
                                                    <td style="width: 20%; text-align: center;">
                                                        {{counterF6(numb_f6)}}
                                                    </td>
                                                </tr>
                                            </div>
                                            <div class="input-group">
                                                <textarea  class="form-control" placeholder="Ketik disini ..."  rows="3" v-model="formInfoFak.info"></textarea>
                                            </div><br>
                                            <button type="button" class="btn btn-success btn-sm btn-rounded pull-right" @click.prevent="saveInput()">
                                                <i class="fa fa-plus-square"></i> Tambahkan
                                            </button>
                                        </div><br>
                                        <hr>
                                        <div style="margin-top: 5px;" v-if="listInfoFak.length > 0">
                                            <div v-for="fk in listInfoFak">
                                                <ul class="list-unstyled" v-if="fk.type == 'F6'">
                                                    <li class="media">
                                                        <div class="media-body">
                                                            <div class="d-flex w-100 justify-content-end">
                                                                <!-- <h5 class="mb-1 text-white">List group item heading</h5> -->
                                                                <!--  <small class="text-danger pull-right"><a href="javascript:void(0)" class="text-danger pull-right"><i class="fa fa-minus"></i> Hapus</a></small> -->
                                                            </div>
                                                            <p class="mb-1">
                                                                {{fk.info}}
                                                            </p>
                                                            <div v-if="fk.child && fk.child.length > 0">
                                                                <div class="media mt-3" v-for="(fkc, number) in fk.child">
                                                                    <div class="media-body pr-3">
                                                                        {{number+1}}. {{fkc.info}}
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="media mt-3" >
                                                                <div class="media-body pr-3">
                                                                    <div class="form-group">
                                                                        <textarea  class="form-control" placeholder="Ketik disini ..."  rows="3" v-model="formChild.info"></textarea>
                                                                    </div>
                                                                    <button type="button" class="btn btn-success btn-sm btn-rounded pull-right" @click.prevent="saveInputChild(fk.id)">
                                                                        <i class="fa fa-plus-square"></i> Tambahkan
                                                                    </button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- PERSYARATAN JABATAN TERTENTU-->
                    <div v-if = "step == 'syarat'">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="card">
                                    <div class="card-body">
                                        <h6 class="card-title">PERSYARATAN JABATAN TERTENTU (Wajib di isi)</h6>
                                        <div class="form-group">
                                            <div class="input-group">
                                                <textarea  class="form-control" placeholder="Ketik disini ..."  rows="6" v-model="formInfoFak.info"></textarea>
                                            </div><br>
                                            <button type="button" class="btn btn-success btn-sm btn-rounded pull-right" @click.prevent="saveInput()">
                                                <i class="fa fa-plus-square"></i> Tambahkan
                                            </button>
                                        </div><br>

                                        <div class="form-group">
                                            <tr>
                                                <th colspan="2" style="text-align: end;"> Job Value </th>
                                                <th style="text-align: center;">{{formatNumber(jobValue())}}</th>
                                            </tr>
                                            <tr>
                                                <th colspan="2" style="text-align: end;"> Job Class </th>
                                                <th style="text-align: center;">{{jobClass(jobValue())}}</th>
                                            </tr>
                                            <!-- <tr>
                                                <td colspan="3">
                                                    <button class="btn btn-success pull-right" :disabled="numb_f1 == 0 || numb_f2 == 0 || numb_f3 == 0 || numb_f41 == 0 || numb_f42 == 0 || numb_f5 == 0 || numb_f6 == 0 " @click.prevent="simpan()"> Simpan</button>
                                                </td>
                                            </tr> -->
                                        </div>
                                        <hr>
                                        <div style="margin-top: 5px;" v-if="listInfoFak.length > 0">
                                            <div v-for="fk in listInfoFak">
                                                <ul class="list-unstyled" v-if="fk.type == 'REQ'">
                                                    <li class="media">
                                                        <div class="media-body">
                                                            <div class="d-flex w-100 justify-content-end">
                                                                <!-- <h5 class="mb-1 text-white">List group item heading</h5> -->
                                                                <!--  <small class="text-danger pull-right"><a href="javascript:void(0)" class="text-danger pull-right"><i class="fa fa-minus"></i> Hapus</a></small> -->
                                                            </div>
                                                            <p class="mb-1">
                                                                {{fk.info}}
                                                            </p>
                                                            <div v-if="fk.child && fk.child.length > 0">
                                                                <div class="media mt-3" v-for="(fkc, number) in fk.child">
                                                                    <div class="media-body pr-3">
                                                                        {{number+1}}. {{fkc.info}}
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="media mt-3" >
                                                                <div class="media-body pr-3">
                                                                    <div class="form-group">
                                                                        <textarea  class="form-control" placeholder="Ketik disini ..."  rows="3" v-model="formChild.info"></textarea>
                                                                    </div>
                                                                    <button type="button" class="btn btn-success btn-sm btn-rounded pull-right" @click.prevent="saveInputChild(fk.id)">
                                                                        <i class="fa fa-plus-square"></i> Tambahkan
                                                                    </button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                    </div>
                    <button class="btn btn-rounded btn-block btn-info" :disabled="numb_f1 == 0 || numb_f2 == 0 || numb_f3 == 0 || numb_f41 == 0 || numb_f42 == 0 || numb_f5 == 0 || numb_f6 == 0 " @click.prevent="$root.$router.replace({name: 'list.infofak'}) && simpan()">Simpan</button>
                </div>
            </div>
        </div>
    </div>
</div>
</template>

<script>
    import ApiPosition from '../../services/api/ManagementPosition.js';
    import ApiEvjab from '../../services/api/Evjab.js';
    export default {
        props: ['id'],
        
        data() {
            return {
                infoJabatan: {},
                totalValue: 0,
                step: 'faktor-satu',
        
                numb_f1: 0,
                numb_f2: 0,
                numb_f3: 0,
                numb_f41: 0,
                numb_f42:0,
                numb_f5: 0,
                numb_f6: 0,
                formFes: {
                    position_id: 0,
                    f1: 0,
                    f2: 0,
                    f3: 0,
                    f4_1: 0,
                    f4_2: 0,
                    f5: 0,
                    f6: 0
                },
                totalValue: 0,

                //FAKTOR SATU
                formInfoFak: {
                    id_position: 0,
                    info: '',
                    type: 'F1',
                    standar: '',
                    parent_id: 0
                },

                formChild: {
                    id_position: 0,
                    info: '',
                    type: 'F1',
                    standar: '',
                    parent_id: 0
                },

                listInfoFak: []

            }
        },
        mounted() {
            this.formInfoFak.id_position = this.id
            ApiPosition.getOneById(this.id)
            .then(_resp => {
                this.infoJabatan = _resp.data.position
                this.getInput()
            })
        },
        methods: {
            doStep(step) {
                switch (step) {
                    case 'F1':
                        this.step = 'faktor-satu'
                        this.formInfoFak.type = step
                        break;
                    case 'F2':
                        this.step = 'faktor-dua'
                        this.formInfoFak.type = step
                        break;
                    case 'F3':
                        this.step = 'faktor-tiga'
                        this.formInfoFak.type = step
                        break;
                    case 'F41':
                        this.step = 'faktor-empat1'
                        this.formInfoFak.type = step
                        break;
                    case 'F42':
                        this.step = 'faktor-empat2'
                        this.formInfoFak.type = step
                        break;
                    case 'F5':
                        this.step = 'faktor-lima'
                        this.formInfoFak.type = step
                        break;
                    case 'F6':
                        this.step = 'faktor-enam'
                        this.formInfoFak.type = step
                        break;
                    case 'REQ':
                        this.step = 'syarat'
                        this.formInfoFak.type = step
                        break;
                    
                    default:
                        break;
                }
            },
            getInput() {
                ApiEvjab.GetInput_infoFak(this.id)
                .then(_resp => {
                    this.listInfoFak = _resp.data
                })
            },
            simpan() {
                this.formFes.position_id = parseInt(this.id)
                ApiEvjab.Create(this.formFes)
                .then(resp => resp)
                .finally(() => {
                    this.$root.$router.replace({name: 'list.evjab'})
                })
            },


            saveAll(){
                saveInputChild()
                simpan()
            },

            saveInput() {
                ApiEvjab.CreateInput_infoFak(this.formInfoFak)
                .then(_resp => {
                    this.formInfoFak.info = ''
                    this.formInfoFak.standar = ''
                })
                .finally(() => {
                    this.getInput()
                })
            },

            saveInputChild(id) {
                this.formChild.id_position = this.id
                this.formChild.parent_id = id
                this.formChild.type = this.formInfoFak.type
                ApiEvjab.CreateInput_infoFak(this.formChild)
                .then(_resp => {
                    this.formChild.info = ''
                    this.formChild.standar = ''
                })
                .finally(() => {
                    this.getInput()
                })
            },

            counterF1(number) {
                this.formFes.f1 = parseInt(number)
                if(number == 1) {
                    return 175
                } else if (number == 2) {
                    return 350
                } else if (number == 3) {
                    return 550
                } else if (number == 4) {
                    return 775
                } else if (number == 5) {
                    return 900
                } else {
                    return "-"
                }
            },
            counterF2(number) {
                this.formFes.f2 = parseInt(number)
                if(number == 1) {
                    return 100
                } else if (number == 2) {
                    return 250
                } else if (number == 3) {
                    return 350
                } else {
                    return "-"
                }
            },
            counterF3(number) {
                this.formFes.f3 = parseInt(number)
                if(number == 1) {
                    return 450
                } else if (number == 2) {
                    return 775
                } else if (number == 3) {
                    return 900
                } else {
                    return "-"
                }
            },
            counterF41(number) {
                this.formFes.f4_1 = parseInt(number)
                if(number == 1) {
                    return 25
                } else if (number == 2) {
                    return 50
                } else if (number == 3) {
                    return 75
                } else if (number == 4) {
                    return 100
                } else {
                    return "-"
                }
            },
            counterF42(number) {
                this.formFes.f4_2 = parseInt(number)
                if(number == 1) {
                    return 30
                } else if (number == 2) {
                    return 75
                } else if (number == 3) {
                    return 100
                } else if (number == 4) {
                    return 125
                } else {
                    return "-"
                }
            },
            counterF5(number) {
                this.formFes.f5 = parseInt(number)
                if(number == 1) {
                    return 75
                } else if (number == 2) {
                    return 205
                } else if (number == 3) {
                    return 340
                } else if (number == 4) {
                    return 505
                } else if (number == 5) {
                    return 650
                } else if (number == 6) {
                    return 800
                } else if (number == 7) {
                    return 930
                } else if (number == 8) {
                    return 1030
                } else {
                    return "-"
                }
            },
            counterF6(number) {
                this.formFes.f6 = parseInt(number)
                if(number == 1) {
                    return 310
                } else if (number == 2) {
                    return 575
                } else if (number == 3) {
                    return 975
                } else if (number == 4) {
                    return 1120
                } else if (number == 5) {
                    return 1225
                } else if (number == 6) {
                    return 1325
                } else {
                    return "-"
                }
            },


            jobValue(){
                let total = 0
                total += this.numb_f1 != 0 ? this.counterF1(this.numb_f1) : 0
                total += this.numb_f2 != 0 ? this.counterF2(this.numb_f2) : 0
                total += this.numb_f3 != 0 ? this.counterF3(this.numb_f3) : 0
                total += this.numb_f41 != 0 ? this.counterF41(this.numb_f41) : 0
                total += this.numb_f42 != 0 ? this.counterF42(this.numb_f42) : 0
                total += this.numb_f5 != 0 ? this.counterF5(this.numb_f5) : 0
                total += this.numb_f6 != 0 ? this.counterF6(this.numb_f6) : 0

                return total
            },

            jobClass(number){
                let kelas = 0
                if (number >=190 && number<=240) {
                    kelas = 1
                    return kelas
                }else if (number>=245 && number <=300) {
                    kelas = 2
                    return kelas
                }else if (number>=305 && number <= 370) {
                    kelas = 3
                    return kelas
                }else if (number>=375 && number <= 450) {
                    kelas = 4
                    return kelas
                }else if (number>=455 && number <= 650) {
                    kelas = 5 
                    return kelas    
                }else if (number>=655 && number <= 850) {
                    kelas = 6
                    return kelas
                }else if (number>=855 && number <=1100) {
                    kelas = 7
                    return kelas
                }else if (number>=1105 && number <= 1350) {
                    kelas = 8
                    return kelas
                }else if (number>=1355 && number <= 1600) {
                    kelas = 9
                    return kelas
                }else if (number>=1605 && number <= 1850) {
                    kelas = 10
                    return kelas
                }else if (number>=1855 && number <= 2100) {
                    kelas = 11
                    return kelas
                }else if (number>=2105 && number <=2350) {
                    kelas =12
                    return kelas
                }else if (number>=2355 && number<=2750) {
                    kelas = 13
                    return kelas
                }else if (number>=2755 && number <=3150) {
                    kelas = 14
                    return kelas
                }else if (number>=3155 && number <= 3600) {
                    kelas = 15
                    return kelas
                }else if (number>=3605 && number<=4050) {
                    kelas = 16
                    return kelas
                }else if (number>= 4055) {
                    kelas = 17
                    return kelas
                }else 
                return "Tanpa Kelas"
            },
            formatNumber(angka, prefix = "", Sparators = "."){
                let string_number = angka.toString()
                var number_string = string_number.replace(/[^,\d]/g, '').toString(),
                split   		= number_string.split(','),
                sisa     		= split[0].length % 3,
                rupiah     		= split[0].substr(0, sisa),
                ribuan     		= split[0].substr(sisa).match(/\d{3}/gi);
                if(ribuan){
                    let separator = sisa ? Sparators : '';
                    rupiah += separator + ribuan.join('.');
                }
                rupiah = split[1] != undefined ? rupiah + ',' + split[1] : rupiah;
                return prefix == undefined ? rupiah : (rupiah ? '' + rupiah : '');

            },
            
        }
    }
</script>